<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>La Boîte à mots — MaterielOrthophonie.fr</title>
  <meta name="description" content="Outil de progression du déchiffrage" />
  <meta name="author" content="MaterielOrthophonie.fr" />
  <!-- Google Fonts: DM Sans, Sora, IBM Plex Mono -->
  <link
    href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700;800&family=Sora:wght@400;500;600;700;800&family=IBM+Plex+Mono:wght@400;500&display=swap"
    rel="stylesheet" />
  <!-- Preload MDI École font -->
  <link rel="preload" href="/fonts/MDIecole-Regular.otf" as="font" type="font/otf" crossorigin="anonymous" />
  <link rel="preload" href="/fonts/MDIecole-Bold.otf" as="font" type="font/otf" crossorigin="anonymous" />
  <!-- Preload OpenDyslexic font -->
  <!-- Preload OpenDyslexic font -->
  <link rel="preload" href="/fonts/OpenDyslexic-Regular.otf" as="font" type="font/otf" crossorigin="anonymous" />
  <link rel="preload" href="/fonts/OpenDyslexic-Bold.otf" as="font" type="font/otf" crossorigin="anonymous" />
  <meta property="og:title" content="La Boîte à mots — MaterielOrthophonie.fr" />
  <meta property="og:description" content="Outil de progression du déchiffrage" />
  <meta property="og:type" content="website" />
  <!-- Supabase Auth -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
  <script>
    // Only check authentication if NOT in an iframe and NOT on localhost
    // (parent shell already handles auth, localhost is for dev)
    if (window.self === window.top && !window.location.hostname.match(/^(localhost|127\.0\.0\.1)$/)) {
      // Initialize Supabase
      const supabaseUrl = 'https://jzefsnvmlvxvwzpbpvaq.supabase.co';
      const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp6ZWZzbnZtbHZ4dnd6cGJwdmFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAxNTYwODAsImV4cCI6MjA4NTczMjA4MH0.OS85CwkjuAdLirMtq0l1Xlir9Fgtz_JJVW41eQhcLKw';
      const supabaseClient = window.supabase.createClient(supabaseUrl, supabaseAnonKey);

      // Check authentication
      (async () => {
        const { data: { user } } = await supabaseClient.auth.getUser();
        if (!user) {
          // Not logged in - redirect to login
          window.location.href = 'https://app.materielorthophonie.fr/login.html';
        }
      })();
    }
  </script>
  <div id="root"></div>
  <script type="module" src="/src/main.tsx"></script>
</body>

</html>